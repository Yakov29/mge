<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/mge/index.a4ae6b1e.css"><title>Account Settings</title><style>.profile-settings,.notifications-settings{background-color:#f4f4f4;border-radius:8px;max-width:600px;margin:20px auto;padding:20px;position:relative}.profile-settings h1,.notifications-settings h1{color:#001c27;margin:0;font-size:24px}.profile-settings .profile-name,.notifications-settings .profile-name{color:#333;margin-bottom:20px;font-size:18px}.profile-settings label,.notifications-settings label{margin-bottom:8px;font-weight:700;display:block}.profile-settings input,.notifications-settings input{border:1px solid #ccc;border-radius:4px;width:100%;margin-bottom:12px;padding:8px}.profile-settings button,.notifications-settings button{color:#fff;cursor:pointer;background-color:#007bff;border:none;border-radius:4px;padding:10px 20px;font-size:16px}.profile-settings button:hover,.notifications-settings button:hover{background-color:#0056b3}.modal{background-color:#00000080;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:fixed;top:0;left:0}.modal-content{background-color:#fff;border-radius:8px;width:80%;max-width:500px;padding:20px;overflow-y:auto}.modal-header{justify-content:space-between;align-items:center;display:flex}.modal-header h2{margin:0}.modal-header button{cursor:pointer;background:0 0;border:none;font-size:20px}.modal-body{margin-top:10px}#notificationsButton{color:#fff;cursor:pointer;background-color:#007bff;border:none;border-radius:4px;padding:10px 20px;font-size:16px;position:fixed;bottom:20px;right:20px}#notificationsButton:hover{background-color:#0056b3}.notification-item{border-bottom:1px solid #ddd;justify-content:space-between;align-items:center;padding:10px;display:flex}.notification-item p{margin:0}.notification-item button{color:red;cursor:pointer;background:0 0;border:none;font-size:16px}.notification-item button:hover{color:#8b0000}</style></head><body class="tab__body"> <div class="tab"> <a href="/mge/index.html"><span class="tab__logo__text">ED</span></a> <a href="/mge/pages/dashboard.html"> <img class="tab__mainicon" src="/mge/dashboard.c1601abe.svg" alt> </a> <ul class="tab__list"> <li class="tab__list__item"> <a href="/mge/pages/courses.html"> <img class="tab__list__item__svg" src="/mge/school.185c1a10.svg" alt="School"> </a> </li> <li class="tab__list__item"> <a href="/mge/pages/lessons.html"> <img class="tab__list__item__svg" src="/mge/emoji_objects.b46bab92.svg" alt="Emoji Objects"> </a> </li> <li class="tab__list__item"> <a href="/mge/pages/rewiews.html"> <img class="tab__list__item__svg" src="/mge/chat.6da958e5.svg" alt="Chat"> </a> </li> </ul> <a href="/mge/pages/settings.html" id="profileCircle" class="profile-circle"></a> <button id="notificationsButton">Уведомления</button> </div> <div class="profile-settings"> <h1>Настройки профиля</h1> <div class="profile-name" id="profileName">Имя пользователя</div> <form id="settingsForm"> <label for="name">Имя</label> <input type="text" id="name" name="name" required> <label for="password">Пароль</label> <input type="password" id="password" name="password" required> <button type="submit">Сохранить изменения</button> </form> </div>  <div id="profileModal" class="modal"> <div class="modal-content profile-settings"> <div class="modal-header"> <h2>Настройки профиля</h2> <button id="closeProfileModal">&times;</button> </div> <div class="modal-body">  <form id="settingsForm"> <label for="name">Имя</label> <input type="text" id="name" name="name" required> <label for="password">Пароль</label> <input type="password" id="password" name="password" required> <button type="submit">Сохранить изменения</button> </form> </div> </div> </div>  <div id="notificationsModal" class="modal"> <div class="modal-content notifications-settings"> <div class="modal-header"> <h2>Уведомления</h2> <button id="closeNotificationsModal">&times;</button> </div> <div class="modal-body"> <form id="notificationForm"> <label for="notificationMessage">Сообщение</label> <input type="text" id="notificationMessage" name="notificationMessage" required> <button type="submit">Отправить уведомление</button> </form> <div id="notificationsList">  </div> </div> </div> </div> <script>document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("#profileCircle"),t=document.querySelector("#profileModal"),o=document.querySelector("#notificationsModal"),i=document.querySelector("#closeProfileModal"),n=document.querySelector("#closeNotificationsModal"),a=document.querySelector("#notificationsButton"),r=document.querySelector("#settingsForm"),l=document.querySelector("#profileName"),s=document.querySelector("#notificationForm"),c=document.querySelector("#notificationsList"),d=async e=>{try{let t=await fetch(`https://669a78899ba098ed61ffc5a3.mockapi.io/accounts?login=${e}`);if(!t.ok)throw Error("Network response was not ok");return(await t.json())[0]}catch(e){console.error("Error fetching user by login:",e)}},f=async()=>{let e=JSON.parse(localStorage.getItem("userProfile"));if(e&&e.login){let t=await d(e.login);if(t){let e=t.notifications||[];c.innerHTML=e.map((e,t)=>`
              <div class="notification-item" data-id="${t}">
                <p>${e}</p>
                <button class="deleteNotificationButton">&times;</button>
              </div>
            `).join("")}}else console.error("User login is not defined in local storage")},u=async e=>{e.preventDefault();let t=document.querySelector("#name").value,o=document.querySelector("#password").value,i=JSON.parse(localStorage.getItem("userProfile"));if(i&&i.login){let e=await d(i.login);if(e)try{let i=await fetch(`https://669a78899ba098ed61ffc5a3.mockapi.io/accounts/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,name:t,password:o})});if(i.ok){alert("Профиль успешно обновлён!");let e=await i.json();localStorage.setItem("userProfile",JSON.stringify(e))}else alert("Не удалось обновить профиль.")}catch(e){console.error("Error updating profile:",e)}}else console.error("User login is not defined in local storage")},y=async e=>{e.preventDefault();let t=document.querySelector("#notificationMessage").value,o=JSON.parse(localStorage.getItem("userProfile"));if(o&&o.login){let e=await d(o.login);if(e){let o=[...e.notifications||[],t];try{let t=await fetch(`https://669a78899ba098ed61ffc5a3.mockapi.io/accounts/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,notifications:o})});if(t.ok){alert("Уведомление отправлено!");let e=await t.json();localStorage.setItem("userProfile",JSON.stringify(e)),f()}else alert("Не удалось отправить уведомление.")}catch(e){console.error("Error sending notification:",e)}}}else console.error("User login is not defined in local storage")},g=async e=>{let t=JSON.parse(localStorage.getItem("userProfile"));if(t&&t.login){let o=await d(t.login);if(o){let t=o.notifications.filter((t,o)=>o!==e);try{let e=await fetch(`https://669a78899ba098ed61ffc5a3.mockapi.io/accounts/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...o,notifications:t})});if(e.ok){alert("Уведомление удалено!");let t=await e.json();localStorage.setItem("userProfile",JSON.stringify(t)),f()}else alert("Не удалось удалить уведомление.")}catch(e){console.error("Error deleting notification:",e)}}}else console.error("User login is not defined in local storage")};e.addEventListener("click",()=>{t.style.display="flex"}),a.addEventListener("click",()=>{o.style.display="flex",f()}),i.addEventListener("click",()=>{t.style.display="none"}),n.addEventListener("click",()=>{o.style.display="none"}),r.addEventListener("submit",u),s.addEventListener("submit",y),c.addEventListener("click",e=>{e.target.classList.contains("deleteNotificationButton")&&g(parseInt(e.target.parentElement.getAttribute("data-id")))}),(()=>{let t=JSON.parse(localStorage.getItem("userProfile"));t&&t.name?(e.textContent=t.name[0].toUpperCase(),e.style.display="flex",l.textContent=t.name):(e.style.display="none",l.textContent="Имя пользователя")})()});</script> </body></html>