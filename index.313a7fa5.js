var e=globalThis,t={},r={},i=e.parcelRequirecf3a;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in r){var i=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,i.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},e.parcelRequirecf3a=i),i.register;const n="https://669a78899ba098ed61ffc5a3.mockapi.io/accounts",o=async e=>{try{let t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw Error(`Registration failed: ${e.message}`)}},a=async()=>{try{let e=await fetch(n);if(!e.ok)throw Error("Network response was not ok");return await e.json()}catch(e){throw Error(`Failed to fetch profiles: ${e.message}`)}};document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".profile__circle"),t=document.querySelector(".regButton"),r=document.querySelector(".logButton"),i=document.querySelector("#logout-button"),n=document.querySelector("#board-link"),s=document.querySelector(".register__form"),l=document.querySelector(".login__form"),c=l?l.querySelector(".error-message"):null,d=s?s.querySelector(".error-message"):null,g=document.querySelector(".register__modal"),u=document.querySelector(".login__modal"),f=document.querySelector(".tryButton"),m=()=>{let o=localStorage.getItem("userProfile");if(e){if(o){e.classList.remove("change__invisible"),i&&i.classList.remove("change__invisible"),n&&n.classList.remove("change__invisible"),t&&t.classList.add("change__invisible"),r&&r.classList.add("change__invisible");let a=JSON.parse(o);e.textContent=a.name[0].toUpperCase()}else e.classList.add("change__invisible"),i&&i.classList.add("change__invisible"),n&&n.classList.add("change__invisible"),t&&t.classList.remove("change__invisible"),r&&r.classList.remove("change__invisible")}};m(),s&&s.addEventListener("submit",async e=>{e.preventDefault(),d&&(d.textContent="");let t=e.target.elements.profilename.value,r=e.target.elements.profilesurname.value,i=e.target.elements.profilelogin.value,n=e.target.elements.profilepassword.value;if(!t||!r||!i||!n){d&&(d.textContent="Please fill in all fields");return}let a={name:t,surname:r,login:i,password:n};try{console.log("Registering profile:",a),await o(a),localStorage.setItem("userProfile",JSON.stringify(a)),m(),g&&g.classList.add("change__invisible")}catch(e){d&&(d.textContent="Registration failed. Please try again."),console.error("Registration failed:",e)}}),l&&l.addEventListener("submit",async e=>{e.preventDefault(),c&&(c.textContent="");let t=e.target.elements.profilelogin.value,r=e.target.elements.profilepassword.value;if(!t||!r){c&&(c.textContent="Please fill in all fields");return}try{console.log("Logging in with:",t);let e=(await a()).find(e=>e.login===t&&e.password===r);e?(localStorage.setItem("userProfile",JSON.stringify(e)),m(),u&&u.classList.add("change__invisible")):c&&(c.textContent="Invalid login or password. Please try again.")}catch(e){c&&(c.textContent="Login failed. Please try again."),console.error("Login failed:",e)}}),i&&i.addEventListener("click",()=>{localStorage.removeItem("userProfile"),m()}),t&&t.addEventListener("click",()=>{g&&g.classList.remove("change__invisible")}),r&&r.addEventListener("click",()=>{u&&u.classList.remove("change__invisible")}),f&&f.addEventListener("click",()=>{g&&g.classList.remove("change__invisible")})}),i("79buJ"),i("6byIg"),i("a0pMX");
//# sourceMappingURL=index.313a7fa5.js.map
