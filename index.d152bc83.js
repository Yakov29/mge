const e=document.querySelector(".regButton"),t=document.querySelector(".register__modal"),a=document.querySelector(".logButton"),s=document.querySelector(".login__modal"),i=document.querySelector(".cross__svg"),r=document.querySelector(".cross__svg2");console.log(e),console.log("test"),e.addEventListener("click",e=>{t.classList.remove("change__invisible"),s.classList.add("change__invisible")}),a.addEventListener("click",e=>{s.classList.remove("change__invisible"),t.classList.add("change__invisible")}),i.addEventListener("click",()=>{s.classList.add("change__invisible"),t.classList.add("change__invisible"),console.log(123)}),r.addEventListener("click",()=>{s.classList.add("change__invisible"),t.classList.add("change__invisible"),console.log(123)});const n="https://669a78899ba098ed61ffc5a3.mockapi.io/accounts",o=async e=>{try{let t=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw Error(`Registration failed: ${e.message}`)}},l=async()=>{try{let e=await fetch(n);if(!e.ok)throw Error("Network response was not ok");return await e.json()}catch(e){throw Error(`Failed to fetch profiles: ${e.message}`)}};document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".profile__circle"),t=document.querySelector(".regButton"),a=document.querySelector(".logButton"),s=document.querySelector("#logout-button"),i=document.querySelector(".register__form"),r=document.querySelector(".login__form"),n=r?r.querySelector(".error-message"):null,c=i?i.querySelector(".error-message"):null,d=document.querySelector(".register__modal"),u=document.querySelector(".login__modal"),g=document.querySelector(".tryButton"),v=()=>{let i=localStorage.getItem("userProfile");if(e){if(i){e.classList.remove("change__invisible"),s&&s.classList.remove("change__invisible"),t&&t.classList.add("change__invisible"),a&&a.classList.add("change__invisible");let r=JSON.parse(i);e.textContent=r.name[0].toUpperCase()}else e.classList.add("change__invisible"),s&&s.classList.add("change__invisible"),t&&t.classList.remove("change__invisible"),a&&a.classList.remove("change__invisible")}};v(),i&&i.addEventListener("submit",async e=>{e.preventDefault(),c&&(c.textContent="");let t=e.target.elements.profilename.value,a=e.target.elements.profilesurname.value,s=e.target.elements.profilelogin.value,i=e.target.elements.profilepassword.value;if(!t||!a||!s||!i){c&&(c.textContent="Please fill in all fields");return}let r={name:t,surname:a,login:s,password:i};try{console.log("Registering profile:",r),await o(r),localStorage.setItem("userProfile",JSON.stringify(r)),v(),d&&d.classList.add("change__invisible")}catch(e){c&&(c.textContent="Registration failed. Please try again."),console.error("Registration failed:",e)}}),r&&r.addEventListener("submit",async e=>{e.preventDefault(),n&&(n.textContent="");let t=e.target.elements.profilelogin.value,a=e.target.elements.profilepassword.value;if(!t||!a){n&&(n.textContent="Please fill in all fields");return}try{console.log("Logging in with:",t);let e=(await l()).find(e=>e.login===t&&e.password===a);e?(localStorage.setItem("userProfile",JSON.stringify(e)),v(),u&&u.classList.add("change__invisible")):n&&(n.textContent="Invalid login or password. Please try again.")}catch(e){n&&(n.textContent="Login failed. Please try again."),console.error("Login failed:",e)}}),s&&s.addEventListener("click",()=>{localStorage.removeItem("userProfile"),v()}),t&&t.addEventListener("click",()=>{d&&d.classList.remove("change__invisible")}),a&&a.addEventListener("click",()=>{u&&u.classList.remove("change__invisible")}),g&&g.addEventListener("click",()=>{d&&d.classList.remove("change__invisible")})}),document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("reviews-container"),t=document.getElementById("review-form"),a=document.getElementById("review-name"),s=document.getElementById("review-text"),i=document.getElementById("review-rating"),r=document.getElementById("submit-button"),n=JSON.parse(localStorage.getItem("userProfile"))||{},o=0,l=async()=>{try{let t=await fetch("https://669b6b40276e45187d3569df.mockapi.io/reviews");if(!t.ok)throw Error("Network response was not ok");let a=await t.json();e.innerHTML=a.map(e=>`
                <div class="review">
                    <div class="review__avatar">${e.name[0].toUpperCase()}</div>
                    <div class="review__content">
                        <p class="review__name">${e.name}</p>
                        <p class="review__text">${e.text}</p>
                        <p class="review__rating">\u{420}\u{435}\u{439}\u{442}\u{438}\u{43D}\u{433}: ${"★".repeat(e.rating)}</p>
                    </div>
                </div>
            `).join("")}catch(e){console.error("Failed to fetch reviews:",e)}},c=async(e,t,a)=>{try{if(!(await fetch("https://669b6b40276e45187d3569df.mockapi.io/reviews",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,text:t,rating:a})})).ok)throw Error("Network response was not ok");l()}catch(e){console.error("Failed to add review:",e)}},d=async e=>{try{let t=await fetch("https://669b6b40276e45187d3569df.mockapi.io/reviews");if(!t.ok)throw Error("Network response was not ok");return(await t.json()).some(t=>t.name===e)}catch(e){return console.error("Failed to check user reviews:",e),!1}},u=e=>{document.querySelectorAll(".star").forEach(t=>{t.classList.toggle("selected",t.dataset.value<=e)})};i.addEventListener("click",e=>{e.target.classList.contains("star")&&u(o=parseInt(e.target.dataset.value,10))}),t.addEventListener("submit",async e=>{e.preventDefault();let t=a.value,i=s.value;t&&i&&o>0&&(await d(t)?alert("Ви вже залишали відгук."):(c(t,i,o),s.value="",u(o=0)))}),l(),n.name?(a.value=n.name,a.readOnly=!0,s.disabled=!1,r.disabled=!1):(a.value="",a.readOnly=!0,s.disabled=!0,r.disabled=!0)});
//# sourceMappingURL=index.d152bc83.js.map
