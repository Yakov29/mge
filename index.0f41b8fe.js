const e=document.querySelector(".regButton"),t=document.querySelector(".register__modal"),r=document.querySelector(".logButton"),o=document.querySelector(".login__modal");console.log(e),console.log("test"),e.addEventListener("click",e=>{t.classList.remove("change__invisible")}),r.addEventListener("click",e=>{o.classList.remove("change__invisible")});const i="https://669a78899ba098ed61ffc5a3.mockapi.io/accounts",n=async e=>{try{let t=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw Error(`Registration failed: ${e.message}`)}},l=async()=>{try{let e=await fetch(i);if(!e.ok)throw Error("Network response was not ok");return await e.json()}catch(e){throw Error(`Failed to fetch profiles: ${e.message}`)}};document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".profile__circle"),t=document.querySelector(".regButton"),r=document.querySelector(".logButton"),o=document.querySelector(".logoutButton"),i=document.querySelector(".register__form"),s=document.querySelector(".login__form"),a=s?s.querySelector(".error-message"):null,c=i?i.querySelector(".error-message"):null,d=document.querySelector(".register__modal"),g=document.querySelector(".login__modal"),u=document.querySelector(".tryButton"),m=()=>{let i=localStorage.getItem("userProfile");if(e){if(i){e.classList.remove("change__invisible"),o&&o.classList.remove("change__invisible"),t&&t.classList.add("change__invisible"),r&&r.classList.add("change__invisible");let n=JSON.parse(i);e.textContent=n.name[0].toUpperCase()}else e.classList.add("change__invisible"),o&&o.classList.add("change__invisible"),t&&t.classList.remove("change__invisible"),r&&r.classList.remove("change__invisible")}};m(),i&&i.addEventListener("submit",async e=>{e.preventDefault(),c&&(c.textContent="");let t=e.target.elements.profilename.value,r=e.target.elements.profilesurname.value,o=e.target.elements.profilelogin.value,i=e.target.elements.profilepassword.value;if(!t||!r||!o||!i){c&&(c.textContent="Please fill in all fields");return}let l={name:t,surname:r,login:o,password:i};try{await n(l),localStorage.setItem("userProfile",JSON.stringify(l)),m(),d&&d.classList.add("change__invisible")}catch(e){c&&(c.textContent="Registration failed. Please try again."),console.error("Registration failed:",e)}}),s&&s.addEventListener("submit",async e=>{e.preventDefault(),a&&(a.textContent="");let t=e.target.elements.profilelogin.value,r=e.target.elements.profilepassword.value;if(!t||!r){a&&(a.textContent="Please fill in all fields");return}try{let e=(await l()).find(e=>e.login===t&&e.password===r);e?(localStorage.setItem("userProfile",JSON.stringify(e)),m(),g&&g.classList.add("change__invisible")):a&&(a.textContent="Invalid login or password. Please try again.")}catch(e){a&&(a.textContent="Login failed. Please try again."),console.error("Login failed:",e)}}),e&&e.addEventListener("click",()=>{localStorage.removeItem("userProfile"),m()}),o&&o.addEventListener("click",()=>{localStorage.removeItem("userProfile"),m()}),t&&t.addEventListener("click",()=>{d&&d.classList.remove("change__invisible")}),r&&r.addEventListener("click",()=>{g&&g.classList.remove("change__invisible")}),u&&u.addEventListener("click",()=>{d&&d.classList.remove("change__invisible")})});
//# sourceMappingURL=index.0f41b8fe.js.map
