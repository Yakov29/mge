var e=globalThis,t={},i={},r=e.parcelRequirecf3a;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in i){var r=i[e];delete i[e];var s={id:e,exports:{}};return t[e]=s,r.call(s.exports,s,s.exports),s.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){i[e]=t},e.parcelRequirecf3a=r),r.register;const s="https://669a78899ba098ed61ffc5a3.mockapi.io/accounts",n=async e=>{try{let t=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Network response was not ok");return await t.json()}catch(e){throw Error(`Registration failed: ${e.message}`)}},l=async()=>{try{let e=await fetch(s);if(!e.ok)throw Error("Network response was not ok");return await e.json()}catch(e){throw Error(`Failed to fetch profiles: ${e.message}`)}};document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector(".profile__circle"),t=document.querySelector(".regButton"),i=document.querySelector(".logButton"),r=document.querySelector("#logout-button"),s=document.querySelector(".register__form"),o=document.querySelector(".login__form"),a=o?o.querySelector(".error-message"):null,c=s?s.querySelector(".error-message"):null,d=document.querySelector(".register__modal"),g=document.querySelector(".login__modal"),u=document.querySelector(".tryButton"),_=()=>{let s=localStorage.getItem("userProfile");if(e){if(s){e.classList.remove("change__invisible"),r&&r.classList.remove("change__invisible"),t&&t.classList.add("change__invisible"),i&&i.classList.add("change__invisible");let n=JSON.parse(s);e.textContent=n.name[0].toUpperCase()}else e.classList.add("change__invisible"),r&&r.classList.add("change__invisible"),t&&t.classList.remove("change__invisible"),i&&i.classList.remove("change__invisible")}};_(),s&&s.addEventListener("submit",async e=>{e.preventDefault(),c&&(c.textContent="");let t=e.target.elements.profilename.value,i=e.target.elements.profilesurname.value,r=e.target.elements.profilelogin.value,s=e.target.elements.profilepassword.value;if(!t||!i||!r||!s){c&&(c.textContent="Please fill in all fields");return}let l={name:t,surname:i,login:r,password:s};try{console.log("Registering profile:",l),await n(l),localStorage.setItem("userProfile",JSON.stringify(l)),_(),d&&d.classList.add("change__invisible")}catch(e){c&&(c.textContent="Registration failed. Please try again."),console.error("Registration failed:",e)}}),o&&o.addEventListener("submit",async e=>{e.preventDefault(),a&&(a.textContent="");let t=e.target.elements.profilelogin.value,i=e.target.elements.profilepassword.value;if(!t||!i){a&&(a.textContent="Please fill in all fields");return}try{console.log("Logging in with:",t);let e=(await l()).find(e=>e.login===t&&e.password===i);e?(localStorage.setItem("userProfile",JSON.stringify(e)),_(),g&&g.classList.add("change__invisible")):a&&(a.textContent="Invalid login or password. Please try again.")}catch(e){a&&(a.textContent="Login failed. Please try again."),console.error("Login failed:",e)}}),r&&r.addEventListener("click",()=>{localStorage.removeItem("userProfile"),_()}),t&&t.addEventListener("click",()=>{d&&d.classList.remove("change__invisible")}),i&&i.addEventListener("click",()=>{g&&g.classList.remove("change__invisible")}),u&&u.addEventListener("click",()=>{d&&d.classList.remove("change__invisible")})});const o=document.querySelector(".regButton"),a=document.querySelector(".register__modal"),c=document.querySelector(".logButton"),d=document.querySelector(".login__modal"),g=document.querySelectorAll(".cross__svg");o.addEventListener("click",e=>{a.classList.remove("change__invisible"),d.classList.add("change__invisible")}),c.addEventListener("click",e=>{d.classList.remove("change__invisible"),a.classList.add("change__invisible")}),g[0].addEventListener("click",()=>{d.classList.add("change__invisible"),a.classList.add("change__invisible"),console.log(123)}),g[1].addEventListener("click",()=>{d.classList.add("change__invisible"),a.classList.add("change__invisible"),console.log(123)}),r("79buJ");
//# sourceMappingURL=index.f9922b92.js.map
